\chapter{Welcome to EMEP }

This guide gives a brief documentation of the Unified EMEP model
version rv.3\_7.
It is intended primarily as a guide on how to run the model, and
to help users wishing to understand or change 
the model in terms of domains, outputs, chemistry, etc.
% This guide is also intended to give some advice on new programming with a few
% simple ideas and rules.

The main documentation for the model is given in:

\begin{itemize}
\item
D.~Simpson, H.~Fagerli, J.E. Jonson, S.~Tsyro, P.~Wind, and J.-P. Tuovinen.
{The Unified EMEP Eulerian Model. Model Description}.
EMEP MSC-W Report 1/2003, The Norwegian
Meteorological Institute, Oslo, Norway, 2003.
\item
H.~Fagerli and D.~Simpson and S.~Tsyro,
%L.Tarrason, H. Fagerli, J.E. Jonson, H. Klein, M van Loon, D. Simpson,
%        S. Tsyro, V. Vestreng, P. Wind, M. Posch, S. Solberg, T. Spranger,
%        K. Cuvelier, P. Thunis and L. White., Unified EMEP model: Updates,
        in EMEP Status Report 1/2004 (Tarrason, L. {\sl et al.}), Transboundary acidification, eutrophication
        and ground level ozone in Europe, Status Report 1/2004, Chapter 2 (pp~11-18), The
        Norwegian Meteorological Institute, Oslo, Norway, 2004. 

\end{itemize}

 Copies of both reports can be obtained from the EMEP website: \\
\url{http://www.emep.int}, and a HTML copy of EMEP Status Report
1/2003 is
available at 
\url{http://www.emep.int/UniDoc/index.html}

The model source code is available from the  EMEP Open Source
  website: \url{http://www.emep.int/OpenSource/index.html}

\section{Licenses and Caveats}

The EMEP code is provided under the GNU General Public License version 3
(\url{http://fsf.org} and/or
\url{http://www.gnu.org/copyleft/gpl.html}).
\newpage 
Each code module is prefaced with something like:

\begin{verbatim}
! <EXAMPLE_CODE.f90 - A component of the EMEP MSC-W Unified Eulerian
!          Chemical transport Model>
!*****************************************************************************!
!*
!*  Copyright (C) 2007 met.no
!*
!*  Contact information:
!*  Norwegian Meteorological Institute
!*  Box 43 Blindern
!*  0313 OSLO
!*  NORWAY
!*  email: emep.mscw@met.no
!*
!*    This program is free software: you can redistribute it and/or modify
!*    it under the terms of the GNU General Public License as published by
!*    the Free Software Foundation, either version 3 of the License, or
!*    (at your option) any later version.
!*
!*    This program is distributed in the hope that it will be useful,
!*    but WITHOUT ANY WARRANTY; without even the implied warranty of
!*    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
!*    GNU General Public License for more details.
!*
!*    You should have received a copy of the GNU General Public License
!*    along with this program.  If not, see <http://www.gnu.org/licenses/>.
!*****************************************************************************!
\end{verbatim}

And a copy of the license file, {\bf gpl.txt}, is provided with the
model code source files.

\noindent It is important to note that the code is provided ``as it is'', 
and EMEP/MSC-W has very limited resources with which to support
code-usage. An {\bf EMEP Forum} is set up and are available from the
EMEP Open Source website in section ``Users'': ``EMEP Forum''
to help users, and hopefully to let users help other users.
Support to the user community will develop here with your
contribution. 
Please let us know what your needs for information are 
(e-mail: emep.mscw@met.no).


\section{Computer Information}
\label{sec:compinf}

To compile the Unified EMEP model you need:\\

\textbf{Fortran 95 compiler}

\textbf{NetCDF Library ($>$3.5.1)}

\textbf{MPI Library ($>$1.0)}\\

It is necessary to compile with double precision reals (8 bytes
reals). The program has been used on computers ranging from a Linux laptop to supercomputers 
(Itanium2 cluster, Intel Xeon cluster, Cray XT4, IBM power5+). It is compatible with all 
compilers tested so far:  Intel, PGI, gfortran, XL fortran. Examples of Makefiles are provided 
with the model code source files.

The code has been tested with 1 to 1024 CPU, and scales well (for large grids).  If only one 
CPU is used 1-2 GB memory is required and if more than one,
for example 64 CPU are used, 200 MB of memory per CPU is enough (in
the case of a 132 X 159 grid size). For runs on more than 32 CPU, a fast interconnect is 
recommended (infiniband for example), for smaller runs, gigabit ethernet is sufficient. 
It takes $\sim$3.5 hrs on 64*Xeon X5355 (2.66GHz) for 1 year simulation.

When downloading input data in order to do a ``base run'' please make
sure that there are 35 Gb disc space available, especially due to
large meteorology input files.

 

\section{Getting Started}


It is recommended to read all the chapters of this Unified EMEP model
User Guide before you start downloading anything from the EMEP Open
Source website.

Please register as an EMEP User on the {\bf EMEP Forum}
(EMEP Open Source website under ``Users'' section: ``EMEP Forum'')
before you start downloading the Unified EMEP model code and/or input
data. This will give you access to further communication with the
developing team and to the section on ``Questions and Answers''. 


This is what you need to do before you can do a ``base run'' with the
Unified EMEP model:

\begin{itemize}
\item Register as an EMEP User
\item Read the Unified EMEP model User Guide
\item
Download input data (description in Chapter~\ref{ch:InputFiles} and
data available from the EMEP Open Source website under ``Download''
section: ``Input Data'')
\item
Download the Unified EMEP model source code (description in 
section~\ref{sec:ModelCode} and the files are available from the EMEP 
Open Source website under ``Download'' section: ``Model Code'')
\item
Follow the instructions for 'Submitting a Run' description in
Chapter~\ref{ch:SubmitARun}.% and/or on the EMEP Open Source website
%under ``Documentation'' section: ``Submitting a run'')
\item
Download some model results for comparison (description in
Chapter~\ref{ch:output} and the files are available from the EMEP 
Open Source website under ``Download'' section: ``Model Results'')
\end{itemize}

\section{Model code}
\label{sec:ModelCode}

The Unified EMEP model code version rv3\_7 are archived into a tar file. 
The tar file is called ``EMEP\_Unified\_model.tar'' and is downloadable from
the EMEP Open Source website.

All model files needed for a model run will be found under the
directory {\bf Unify/Unimod.rv3\_7/} where the model source code, 
makefiles, the runscript and a copy of the license file are stored, 
once this tar file is untarred. An overview is given in 
Table~\ref{Tab:modelfiles}

\begin{table}[h]
\begin{center}
\caption{Contents of ``EMEP\_Unified\_model.tar'' file
   \label{Tab:modelfiles}}
\begin{tabular}{ll}
& \\
\hline
Type      & Filename          \\
\hline
& \\
{\bf Model code directory} & Unify/Unimod.rv3\_7 \\ 
\hline
modules files & *.f90 \\
include files & *.inc \\
makefiles & Makefile\_* \\
run script & modrun.sh \\
a copy of the licence & gpl.txt \\
\hline
\end{tabular}
\end{center}
\end{table}

The model source code is written in Fortran 90/95 programming language.
There are three makefiles provided. ``Makefile'' is for a SGI Origin 3800
computer, ``Makefile\_snow'' is for an Itanium2 cluster and the
``Makefile\_njord'' is for an IBM power5+ cluster. The run script, 
``modrun.sh'', can easily be modified to work on your computer system.
% A detailed 
% description about  how to handle this script
% is given in Chapter~\ref{ch:SubmitARun}, ``Submitting a Run''.  


\section{Model grid}
\label{sec:ModelGrid}

The current EMEP model version and the provided input data
have a horizontal resolution of 50$\times$50 km$^2$ and are defined on a
polar stereographic projection with 20 sigma levels vertically. 
The model uses the same horizontal and vertical grid resolution as the 
meteorological data provided with the model. The physical
description is given in detail in Chapter 2 of the EMEP Status Report
1/2003 Part I (Simpson {\sl et al.}, 2003).

The technical description of the EMEP model grid is also given on the 
EMEP website:
\url{http://www.emep.int/grid/index.html} with details of the projection, and
conversion to/from latitude-longitude coordinates.
